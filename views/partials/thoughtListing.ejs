<!-- Adds thought list items on an occasion page -->
<!-- @author: Suniyya --> 
<!-- To DO change repeated ids to classes --> 

<link rel="stylesheet" href="http://jquery-ui.googlecode.com/svn/tags/latest/themes/base/jquery.ui.theme.css" type="text/css" />
<link rel="stylesheet" href="http://jquery-ui.googlecode.com/svn/tags/latest/themes/base/jquery.ui.base.css" type="text/css" />
<% include editThought.ejs %>
<div class="col-md-8 col-md-offset-2">
  <p class="intro-text"><%=occasion.title%></p>

  <%if (!occasion.isPublished()) { %>
      <div style= "background:#EFECEC; padding:12px; margin-bottom:10px">
        <div style= "background:#EFECEC; color:#000000">
          <p>Share a thought!</p>
        </div>
        <form class="registration-form" role="form" >
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon"><span class="glyphicon glyphicon-envelope"></span>
              </span>
              <textarea id="thought-message" name = "message" placeholder="Add a message" cols="50" rows="5" class="form-first-name form-control"></textarea>


              <!--<input id = "thought-message" name = "message" type="text" class="form-control" style="height: 200px" placeholder="Add a thought" />-->
              
              <input name="occasionId" value="<%=occasion._id%>" type="hidden">
              <input name="userName" value="<%=user.name%>" type="hidden">
              <input name="profilePicture" value="<%=user.profilePicture%>" type="hidden">
            </div>
          </div>

          <div id = "preview">
            <img id = "previewImg" src="http://simpleicon.com/wp-content/uploads/camera.png" class="img-responsive" alt="">
          </div>

          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">
                <span class="glyphicon glyphicon-picture"></span>
              </span>

              <input name="thoughtPicture" placeholder="Add a picture (url)" class="form-first-name form-control" id="url">
              <span class="input-group-btn">
                <a id="upload" class="btn btn-primary">Preview</a>
              </span>
            </div>
          </div>

          <button id = "add-thought" type = "submit" class="btn btn-sm btn-primary btn-block" value = "Submit">SUBMIT</button>
        </form>
      </div>
  

  <% } %>

  <div id= "thoughts">
    <ul id = "thought-list" style="position:relative; width:600px; left:9%">

      <% var numThoughts = occasion.thoughts.length%>
      <% for (var i=0; i<numThoughts; i++) { %>
      <div id ="<%=occasion.thoughts[i]._id%>" class = "thought-box">
          <li class ="thought">
            <img src="<%=occasion.thoughts[i].creator.profilePicture%>">
            <h3 align="left"><%=occasion.thoughts[i].creator.name %></h3>
            <p id="message_<%=occasion.thoughts[i]._id%>" align= "left" > <%=occasion.thoughts[i].message%></p>
            <div class="photoThought">
              <% if(occasion.thoughts[i].photo !== ""){ %>
                <img src="<%=occasion.thoughts[i].photo%>">
             <% }%>
            </div>
            <div  class="delete-thought ui-state-default ui-corner-all" title=".ui-icon-carat-1-n">
              <span class="ui-icon ui-icon-trash"></span>
            </div>
            <div class="edit-thought ui-state-default ui-corner-all" title=".ui-icon-carat-1-n">
              <span class="ui-icon ui-icon-pencil"></span>
            </div>
          </li>
      </div>
      <% } %>
    </ul>
  </div>
</div>